var lt=Object.defineProperty;var ye=e=>{throw TypeError(e)};var it=(e,r,s)=>r in e?lt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s;var U=(e,r,s)=>it(e,typeof r!="symbol"?r+"":r,s),ve=(e,r,s)=>r.has(e)||ye("Cannot "+s);var C=(e,r,s)=>(ve(e,r,"read from private field"),s?s.call(e):r.get(e)),D=(e,r,s)=>r.has(e)?ye("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,s),H=(e,r,s,a)=>(ve(e,r,"write to private field"),a?a.call(e,s):r.set(e,s),s);import{r as i,a as ct,R as dt,b as De}from"./vendor-C1JoJ-56.js";import{A as ut,S as mt,T as ht,U as pt,X as T,a as z,M as ft,L as xt,H as gt,b as bt,c as yt,d as Ae,e as Be,R as vt,V as Te,f as te,g as wt,h as jt,P as we,F as Nt,i as je,j as Ne,k as Et,l as St,m as Ct,n as Rt,o as Ee,p as Pt,q as kt}from"./utils-VVikDn4c.js";import{c as Lt}from"./supabase-BCAmpUdG.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();var $e={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot=i,It=Symbol.for("react.element"),Ut=Symbol.for("react.fragment"),_t=Object.prototype.hasOwnProperty,Mt=Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ft={key:!0,ref:!0,__self:!0,__source:!0};function We(e,r,s){var a,n={},l=null,o=null;s!==void 0&&(l=""+s),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(o=r.ref);for(a in r)_t.call(r,a)&&!Ft.hasOwnProperty(a)&&(n[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps,r)n[a]===void 0&&(n[a]=r[a]);return{$$typeof:It,type:e,key:l,ref:o,props:n,_owner:Mt.current}}ae.Fragment=Ut;ae.jsx=We;ae.jsxs=We;$e.exports=ae;var t=$e.exports,ue={},Se=ct;ue.createRoot=Se.createRoot,ue.hydrateRoot=Se.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function X(){return X=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},X.apply(this,arguments)}var B;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(B||(B={}));const Ce="popstate";function Dt(e){e===void 0&&(e={});function r(a,n){let{pathname:l,search:o,hash:d}=a.location;return me("",{pathname:l,search:o,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(a,n){return typeof n=="string"?n:re(n)}return Bt(r,s,null,e)}function I(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Ve(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function At(){return Math.random().toString(36).substr(2,8)}function Re(e,r){return{usr:e.state,key:e.key,idx:r}}function me(e,r,s,a){return s===void 0&&(s=null),X({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?K(r):r,{state:s,key:r&&r.key||a||At()})}function re(e){let{pathname:r="/",search:s="",hash:a=""}=e;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function K(e){let r={};if(e){let s=e.indexOf("#");s>=0&&(r.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(r.search=e.substr(a),e=e.substr(0,a)),e&&(r.pathname=e)}return r}function Bt(e,r,s,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,o=n.history,d=B.Pop,u=null,m=h();m==null&&(m=0,o.replaceState(X({},o.state,{idx:m}),""));function h(){return(o.state||{idx:null}).idx}function c(){d=B.Pop;let g=h(),f=g==null?null:g-m;m=g,u&&u({action:d,location:v.location,delta:f})}function b(g,f){d=B.Push;let w=me(v.location,g,f);m=h()+1;let j=Re(w,m),N=v.createHref(w);try{o.pushState(j,"",N)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;n.location.assign(N)}l&&u&&u({action:d,location:v.location,delta:1})}function y(g,f){d=B.Replace;let w=me(v.location,g,f);m=h();let j=Re(w,m),N=v.createHref(w);o.replaceState(j,"",N),l&&u&&u({action:d,location:v.location,delta:0})}function E(g){let f=n.location.origin!=="null"?n.location.origin:n.location.href,w=typeof g=="string"?g:re(g);return w=w.replace(/ $/,"%20"),I(f,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,f)}let v={get action(){return d},get location(){return e(n,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(Ce,c),u=g,()=>{n.removeEventListener(Ce,c),u=null}},createHref(g){return r(n,g)},createURL:E,encodeLocation(g){let f=E(g);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:b,replace:y,go(g){return o.go(g)}};return v}var Pe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Pe||(Pe={}));function Tt(e,r,s){return s===void 0&&(s="/"),$t(e,r,s)}function $t(e,r,s,a){let n=typeof r=="string"?K(r):r,l=fe(n.pathname||"/",s);if(l==null)return null;let o=ze(e);Wt(o);let d=null;for(let u=0;d==null&&u<o.length;++u){let m=er(l);d=Xt(o[u],m)}return d}function ze(e,r,s,a){r===void 0&&(r=[]),s===void 0&&(s=[]),a===void 0&&(a="");let n=(l,o,d)=>{let u={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};u.relativePath.startsWith("/")&&(I(u.relativePath.startsWith(a),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(a.length));let m=$([a,u.relativePath]),h=s.concat(u);l.children&&l.children.length>0&&(I(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),ze(l.children,r,h,m)),!(l.path==null&&!l.index)&&r.push({path:m,score:Ht(m,l.index),routesMeta:h})};return e.forEach((l,o)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))n(l,o);else for(let u of qe(l.path))n(l,o,u)}),r}function qe(e){let r=e.split("/");if(r.length===0)return[];let[s,...a]=r,n=s.endsWith("?"),l=s.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let o=qe(a.join("/")),d=[];return d.push(...o.map(u=>u===""?l:[l,u].join("/"))),n&&d.push(...o),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function Wt(e){e.sort((r,s)=>r.score!==s.score?s.score-r.score:Yt(r.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const Vt=/^:[\w-]+$/,zt=3,qt=2,Jt=1,Kt=10,Gt=-2,ke=e=>e==="*";function Ht(e,r){let s=e.split("/"),a=s.length;return s.some(ke)&&(a+=Gt),r&&(a+=qt),s.filter(n=>!ke(n)).reduce((n,l)=>n+(Vt.test(l)?zt:l===""?Jt:Kt),a)}function Yt(e,r){return e.length===r.length&&e.slice(0,-1).every((a,n)=>a===r[n])?e[e.length-1]-r[r.length-1]:0}function Xt(e,r,s){let{routesMeta:a}=e,n={},l="/",o=[];for(let d=0;d<a.length;++d){let u=a[d],m=d===a.length-1,h=l==="/"?r:r.slice(l.length)||"/",c=Zt({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},h),b=u.route;if(!c)return null;Object.assign(n,c.params),o.push({params:n,pathname:$([l,c.pathname]),pathnameBase:ar($([l,c.pathnameBase])),route:b}),c.pathnameBase!=="/"&&(l=$([l,c.pathnameBase]))}return o}function Zt(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=Qt(e.path,e.caseSensitive,e.end),n=r.match(s);if(!n)return null;let l=n[0],o=l.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:a.reduce((m,h,c)=>{let{paramName:b,isOptional:y}=h;if(b==="*"){let v=d[c]||"";o=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const E=d[c];return y&&!E?m[b]=void 0:m[b]=(E||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:o,pattern:e}}function Qt(e,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),Ve(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,u)=>(a.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,r?void 0:"i"),a]}function er(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ve(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function fe(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}function tr(e,r){r===void 0&&(r="/");let{pathname:s,search:a="",hash:n=""}=typeof e=="string"?K(e):e;return{pathname:s?s.startsWith("/")?s:rr(s,r):r,search:nr(a),hash:or(n)}}function rr(e,r){let s=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function de(e,r,s,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sr(e){return e.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function Je(e,r){let s=sr(e);return r?s.map((a,n)=>n===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function Ke(e,r,s,a){a===void 0&&(a=!1);let n;typeof e=="string"?n=K(e):(n=X({},e),I(!n.pathname||!n.pathname.includes("?"),de("?","pathname","search",n)),I(!n.pathname||!n.pathname.includes("#"),de("#","pathname","hash",n)),I(!n.search||!n.search.includes("#"),de("#","search","hash",n)));let l=e===""||n.pathname==="",o=l?"/":n.pathname,d;if(o==null)d=s;else{let c=r.length-1;if(!a&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),c-=1;n.pathname=b.join("/")}d=c>=0?r[c]:"/"}let u=tr(n,d),m=o&&o!=="/"&&o.endsWith("/"),h=(l||o===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(m||h)&&(u.pathname+="/"),u}const $=e=>e.join("/").replace(/\/\/+/g,"/"),ar=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nr=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,or=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ge=["post","put","patch","delete"];new Set(Ge);const ir=["get",...Ge];new Set(ir);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Z.apply(this,arguments)}const xe=i.createContext(null),cr=i.createContext(null),q=i.createContext(null),ne=i.createContext(null),J=i.createContext({outlet:null,matches:[],isDataRoute:!1}),He=i.createContext(null);function dr(e,r){let{relative:s}=r===void 0?{}:r;Q()||I(!1);let{basename:a,navigator:n}=i.useContext(q),{hash:l,pathname:o,search:d}=Xe(e,{relative:s}),u=o;return a!=="/"&&(u=o==="/"?a:$([a,o])),n.createHref({pathname:u,search:d,hash:l})}function Q(){return i.useContext(ne)!=null}function oe(){return Q()||I(!1),i.useContext(ne).location}function Ye(e){i.useContext(q).static||i.useLayoutEffect(e)}function ur(){let{isDataRoute:e}=i.useContext(J);return e?Er():mr()}function mr(){Q()||I(!1);let e=i.useContext(xe),{basename:r,future:s,navigator:a}=i.useContext(q),{matches:n}=i.useContext(J),{pathname:l}=oe(),o=JSON.stringify(Je(n,s.v7_relativeSplatPath)),d=i.useRef(!1);return Ye(()=>{d.current=!0}),i.useCallback(function(m,h){if(h===void 0&&(h={}),!d.current)return;if(typeof m=="number"){a.go(m);return}let c=Ke(m,JSON.parse(o),l,h.relative==="path");e==null&&r!=="/"&&(c.pathname=c.pathname==="/"?r:$([r,c.pathname])),(h.replace?a.replace:a.push)(c,h.state,h)},[r,a,o,l,e])}function Xe(e,r){let{relative:s}=r===void 0?{}:r,{future:a}=i.useContext(q),{matches:n}=i.useContext(J),{pathname:l}=oe(),o=JSON.stringify(Je(n,a.v7_relativeSplatPath));return i.useMemo(()=>Ke(e,JSON.parse(o),l,s==="path"),[e,o,l,s])}function hr(e,r){return pr(e,r)}function pr(e,r,s,a){Q()||I(!1);let{navigator:n}=i.useContext(q),{matches:l}=i.useContext(J),o=l[l.length-1],d=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let m=oe(),h;if(r){var c;let g=typeof r=="string"?K(r):r;u==="/"||(c=g.pathname)!=null&&c.startsWith(u)||I(!1),h=g}else h=m;let b=h.pathname||"/",y=b;if(u!=="/"){let g=u.replace(/^\//,"").split("/");y="/"+b.replace(/^\//,"").split("/").slice(g.length).join("/")}let E=Tt(e,{pathname:y}),v=yr(E&&E.map(g=>Object.assign({},g,{params:Object.assign({},d,g.params),pathname:$([u,n.encodeLocation?n.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:$([u,n.encodeLocation?n.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),l,s,a);return r&&v?i.createElement(ne.Provider,{value:{location:Z({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:B.Pop}},v):v}function fr(){let e=Nr(),r=lr(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},r),s?i.createElement("pre",{style:n},s):null,null)}const xr=i.createElement(fr,null);class gr extends i.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement(He.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function br(e){let{routeContext:r,match:s,children:a}=e,n=i.useContext(xe);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),i.createElement(J.Provider,{value:r},a)}function yr(e,r,s,a){var n;if(r===void 0&&(r=[]),s===void 0&&(s=null),a===void 0&&(a=null),e==null){var l;if(!s)return null;if(s.errors)e=s.matches;else if((l=a)!=null&&l.v7_partialHydration&&r.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,d=(n=s)==null?void 0:n.errors;if(d!=null){let h=o.findIndex(c=>c.route.id&&(d==null?void 0:d[c.route.id])!==void 0);h>=0||I(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,m=-1;if(s&&a&&a.v7_partialHydration)for(let h=0;h<o.length;h++){let c=o[h];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(m=h),c.route.id){let{loaderData:b,errors:y}=s,E=c.route.loader&&b[c.route.id]===void 0&&(!y||y[c.route.id]===void 0);if(c.route.lazy||E){u=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((h,c,b)=>{let y,E=!1,v=null,g=null;s&&(y=d&&c.route.id?d[c.route.id]:void 0,v=c.route.errorElement||xr,u&&(m<0&&b===0?(Sr("route-fallback"),E=!0,g=null):m===b&&(E=!0,g=c.route.hydrateFallbackElement||null)));let f=r.concat(o.slice(0,b+1)),w=()=>{let j;return y?j=v:E?j=g:c.route.Component?j=i.createElement(c.route.Component,null):c.route.element?j=c.route.element:j=h,i.createElement(br,{match:c,routeContext:{outlet:h,matches:f,isDataRoute:s!=null},children:j})};return s&&(c.route.ErrorBoundary||c.route.errorElement||b===0)?i.createElement(gr,{location:s.location,revalidation:s.revalidation,component:v,error:y,children:w(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):w()},null)}var Ze=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ze||{}),Qe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Qe||{});function vr(e){let r=i.useContext(xe);return r||I(!1),r}function wr(e){let r=i.useContext(cr);return r||I(!1),r}function jr(e){let r=i.useContext(J);return r||I(!1),r}function et(e){let r=jr(),s=r.matches[r.matches.length-1];return s.route.id||I(!1),s.route.id}function Nr(){var e;let r=i.useContext(He),s=wr(),a=et();return r!==void 0?r:(e=s.errors)==null?void 0:e[a]}function Er(){let{router:e}=vr(Ze.UseNavigateStable),r=et(Qe.UseNavigateStable),s=i.useRef(!1);return Ye(()=>{s.current=!0}),i.useCallback(function(n,l){l===void 0&&(l={}),s.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Z({fromRouteId:r},l)))},[e,r])}const Le={};function Sr(e,r,s){Le[e]||(Le[e]=!0)}function Cr(e,r){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Y(e){I(!1)}function Rr(e){let{basename:r="/",children:s=null,location:a,navigationType:n=B.Pop,navigator:l,static:o=!1,future:d}=e;Q()&&I(!1);let u=r.replace(/^\/*/,"/"),m=i.useMemo(()=>({basename:u,navigator:l,static:o,future:Z({v7_relativeSplatPath:!1},d)}),[u,d,l,o]);typeof a=="string"&&(a=K(a));let{pathname:h="/",search:c="",hash:b="",state:y=null,key:E="default"}=a,v=i.useMemo(()=>{let g=fe(h,u);return g==null?null:{location:{pathname:g,search:c,hash:b,state:y,key:E},navigationType:n}},[u,h,c,b,y,E,n]);return v==null?null:i.createElement(q.Provider,{value:m},i.createElement(ne.Provider,{children:s,value:v}))}function Pr(e){let{children:r,location:s}=e;return hr(he(r),s)}new Promise(()=>{});function he(e,r){r===void 0&&(r=[]);let s=[];return i.Children.forEach(e,(a,n)=>{if(!i.isValidElement(a))return;let l=[...r,n];if(a.type===i.Fragment){s.push.apply(s,he(a.props.children,l));return}a.type!==Y&&I(!1),!a.props.index||!a.props.children||I(!1);let o={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=he(a.props.children,l)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},pe.apply(this,arguments)}function kr(e,r){if(e==null)return{};var s={},a=Object.keys(e),n,l;for(l=0;l<a.length;l++)n=a[l],!(r.indexOf(n)>=0)&&(s[n]=e[n]);return s}function Lr(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Or(e,r){return e.button===0&&(!r||r==="_self")&&!Lr(e)}const Ir=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ur="6";try{window.__reactRouterVersion=Ur}catch{}const _r="startTransition",Oe=dt[_r];function Mr(e){let{basename:r,children:s,future:a,window:n}=e,l=i.useRef();l.current==null&&(l.current=Dt({window:n,v5Compat:!0}));let o=l.current,[d,u]=i.useState({action:o.action,location:o.location}),{v7_startTransition:m}=a||{},h=i.useCallback(c=>{m&&Oe?Oe(()=>u(c)):u(c)},[u,m]);return i.useLayoutEffect(()=>o.listen(h),[o,h]),i.useEffect(()=>Cr(a),[a]),i.createElement(Rr,{basename:r,children:s,location:d.location,navigationType:d.action,navigator:o,future:a})}const Fr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Dr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=i.forwardRef(function(r,s){let{onClick:a,relative:n,reloadDocument:l,replace:o,state:d,target:u,to:m,preventScrollReset:h,viewTransition:c}=r,b=kr(r,Ir),{basename:y}=i.useContext(q),E,v=!1;if(typeof m=="string"&&Dr.test(m)&&(E=m,Fr))try{let j=new URL(window.location.href),N=m.startsWith("//")?new URL(j.protocol+m):new URL(m),L=fe(N.pathname,y);N.origin===j.origin&&L!=null?m=L+N.search+N.hash:v=!0}catch{}let g=dr(m,{relative:n}),f=Ar(m,{replace:o,state:d,target:u,preventScrollReset:h,relative:n,viewTransition:c});function w(j){a&&a(j),j.defaultPrevented||f(j)}return i.createElement("a",pe({},b,{href:E||g,onClick:v||l?a:w,ref:s,target:u}))});var Ue;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ue||(Ue={}));var _e;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_e||(_e={}));function Ar(e,r){let{target:s,replace:a,state:n,preventScrollReset:l,relative:o,viewTransition:d}=r===void 0?{}:r,u=ur(),m=oe(),h=Xe(e,{relative:o});return i.useCallback(c=>{if(Or(c,s)){c.preventDefault();let b=a!==void 0?a:re(m)===re(h);u(e,{replace:b,state:n,preventScrollReset:l,relative:o,viewTransition:d})}},[m,u,h,a,n,s,e,l,o,d])}function tt(){const[e,r]=i.useState(!1);return i.useEffect(()=>{const s=()=>{const a=window.innerWidth<768,n="ontouchstart"in window||navigator.maxTouchPoints>0;r(a&&n)};return s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",s),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}},[]),e}function Br({children:e,onClick:r,className:s="",disabled:a=!1}){return t.jsx("button",{onClick:r,disabled:a,className:`
        active:scale-95 transition-transform duration-150
        focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50
        disabled:opacity-50 disabled:cursor-not-allowed
        ${s}
      `,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e})}function Tr({items:e=[],className:r=""}){const s=tt(),[a,n]=i.useState(!1);return s?t.jsx("div",{className:`fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 safe-area-padding ${r}`,children:t.jsx("nav",{className:"flex justify-around items-center py-2",children:e.map((l,o)=>t.jsxs(Br,{onClick:()=>n(!1),className:"flex flex-col items-center p-2 text-xs text-gray-600 hover:text-purple-600 transition-colors",children:[l.icon,t.jsx("span",{className:"mt-1",children:l.label})]},o))})}):t.jsx("nav",{className:`flex space-x-6 ${r}`,children:e.map((l,o)=>t.jsx("a",{href:l.href,className:"text-gray-700 hover:text-purple-600 transition-colors py-2 px-3 rounded-lg hover:bg-gray-100",children:l.label},o))})}const rt=()=>{const[e,r]=i.useState({isMobile:!1,isTablet:!1,isDesktop:!1,isTouchDevice:!1,screenWidth:0,screenHeight:0,orientation:"portrait"});return i.useEffect(()=>{const s=()=>{const a=window.innerWidth,n=window.innerHeight;r({isMobile:a<768,isTablet:a>=768&&a<1024,isDesktop:a>=1024,isTouchDevice:"ontouchstart"in window||navigator.maxTouchPoints>0,screenWidth:a,screenHeight:n,orientation:a>n?"landscape":"portrait"})};return s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",s),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}},[]),e};function $r(){const e=rt();return t.jsxs("div",{className:"min-h-screen",children:[t.jsx("section",{className:"bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 text-white",children:t.jsx("div",{className:"container-responsive py-12 md:py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-4 md:mb-6",children:"Welcome to the Ultimate Marketplace"}),t.jsx("p",{className:"text-lg sm:text-xl text-purple-100 mb-6 md:mb-8 max-w-2xl mx-auto px-4",children:"Buy and sell with confidence. Join thousands of users trading everything from electronics to collectibles."}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center items-center",children:[t.jsxs(Ie,{to:"/marketplace",className:"bg-white text-purple-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-all flex items-center justify-center space-x-2 btn-touch w-full sm:w-auto",children:[t.jsx("span",{children:"Browse Marketplace"}),t.jsx(ut,{className:"w-5 h-5"})]}),t.jsx(Ie,{to:"/auth",className:"border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-purple-600 transition-all btn-touch w-full sm:w-auto",children:"Get Started"})]})]})})}),t.jsx("section",{className:"py-12 md:py-20 bg-white",children:t.jsxs("div",{className:"container-responsive",children:[t.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[t.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4",children:"Why Choose Our Marketplace?"}),t.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto px-4",children:"Experience the best platform for buying and selling with these amazing features"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[{icon:mt,title:"Secure Transactions",description:"All transactions are protected with industry-leading security measures and buyer protection."},{icon:ht,title:"Best Prices",description:"Find the best deals and competitive prices from trusted sellers worldwide."},{icon:pt,title:"Community Trust",description:"Join a community of verified users with ratings and reviews for every transaction."}].map((r,s)=>t.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-2xl",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6",children:t.jsx(r.icon,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3 sm:mb-4",children:r.title}),t.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:r.description})]},s))})]})}),!e.isMobile&&t.jsx("section",{className:"bg-gray-100 py-12 md:py-16",children:t.jsx("div",{className:"container-responsive",children:t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:[{number:"10K+",label:"Active Users"},{number:"50K+",label:"Products"},{number:"99%",label:"Satisfaction Rate"},{number:"24/7",label:"Support"}].map((r,s)=>t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-purple-600 mb-2",children:r.number}),t.jsx("div",{className:"text-gray-600 font-medium",children:r.label})]},s))})})})]})}const Wr="https://dpwdjaalfnjjwxvpxtue.supabase.co",Vr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwd2RqYWFsZm5qand4dnB4dHVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NTEyMDYsImV4cCI6MjA3MjMyNzIwNn0.Ng1H2ZDue6YJBpK3dDqVoMWv16s2YLPiyLl3SGSPIN0",k=Lt(Wr,Vr);function le(){const[e,r]=i.useState(null),[s,a]=i.useState(null),[n,l]=i.useState(!0);return i.useEffect(()=>{k.auth.getSession().then(({data:{session:h}})=>{a(h),r((h==null?void 0:h.user)??null),l(!1)});const{data:{subscription:m}}=k.auth.onAuthStateChange((h,c)=>{a(c),r((c==null?void 0:c.user)??null),l(!1)});return()=>m.unsubscribe()},[]),{user:e,session:s,loading:n,signUp:async(m,h)=>{const{data:c,error:b}=await k.auth.signUp({email:m,password:h});return{data:c,error:b}},signIn:async(m,h)=>{const{data:c,error:b}=await k.auth.signInWithPassword({email:m,password:h});return{data:c,error:b}},signOut:async()=>{const{error:m}=await k.auth.signOut();return{error:m}}}}function st({isOpen:e,onClose:r}){const[s,a]=i.useState(!1),[n,l]=i.useState(""),[o,d]=i.useState(""),[u,m]=i.useState(""),[h,c]=i.useState(!1),[b,y]=i.useState(""),{signUp:E,signIn:v}=le();if(!e)return null;const g=async f=>{f.preventDefault(),c(!0),y("");try{let w;s?(w=await E(n,o),w.data.user&&u&&await fetch("/api/create-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:w.data.user.id,email:n,fullName:u})})):w=await v(n,o),w.error?y(w.error.message):r()}catch(w){y(w.message)}finally{c(!1)}};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s?"Create Account":"Sign In"}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(T,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[b&&t.jsx("div",{className:"p-3 bg-red-100 border border-red-300 rounded-lg",children:t.jsx("p",{className:"text-red-700 text-sm",children:b})}),s&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),t.jsxs("div",{className:"relative",children:[t.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",value:u,onChange:f=>m(f.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"email",required:!0,value:n,onChange:f=>l(f.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your email"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"password",required:!0,value:o,onChange:f=>d(f.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your password"})]})]}),t.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-3 rounded-lg transition-all disabled:opacity-50",children:h?"Processing...":s?"Create Account":"Sign In"})]}),t.jsx("div",{className:"p-6 border-t bg-gray-50 rounded-b-2xl",children:t.jsxs("p",{className:"text-center text-gray-600",children:[s?"Already have an account? ":"Don't have an account? ",t.jsx("button",{type:"button",onClick:()=>a(!s),className:"text-purple-600 hover:text-purple-700 font-medium",children:s?"Sign In":"Sign Up"})]})})]})})}function at({product:e,onBuy:r,showActions:s=!0}){var l;const a={new:"Brand New",like_new:"Like New",used:"Used",refurbished:"Refurbished"},n=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o);return t.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 overflow-hidden",children:[t.jsxs("div",{className:"relative h-48 overflow-hidden",children:[t.jsx("img",{src:e.images[0]||"https://images.pexels.com/photos/3561339/pexels-photo-3561339.jpeg",alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("button",{className:"p-2 bg-white bg-opacity-90 rounded-full shadow-md hover:bg-opacity-100 transition-colors",children:t.jsx(gt,{className:"w-4 h-4 text-gray-600"})})}),t.jsx("div",{className:"absolute bottom-3 left-3",children:t.jsx("span",{className:"px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded-full",children:(l=e.category)==null?void 0:l.name})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2 line-clamp-2 group-hover:text-purple-600 transition-colors",children:e.title}),t.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md",children:a[e.condition]}),t.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[t.jsx(bt,{className:"w-3 h-3 mr-1"}),e.location]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:n(e.price)}),e.seller&&t.jsxs("p",{className:"text-sm text-gray-500",children:["by ",e.seller.full_name]})]}),s&&r&&t.jsxs("button",{onClick:()=>r(e.id),className:"flex items-center space-x-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-all transform hover:scale-105",children:[t.jsx(yt,{className:"w-4 h-4"}),t.jsx("span",{children:"Buy Now"})]})]})]})]})}var R;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(R||(R={}));const zr=(()=>{let e=0;return()=>e++})(),qr=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Jr=new Error("called FFmpeg.terminate()");var M,A,F,W,V,se,_;class Kr{constructor(){D(this,M,null);D(this,A,{});D(this,F,{});D(this,W,[]);D(this,V,[]);U(this,"loaded",!1);D(this,se,()=>{C(this,M)&&(C(this,M).onmessage=({data:{id:r,type:s,data:a}})=>{switch(s){case R.LOAD:this.loaded=!0,C(this,A)[r](a);break;case R.MOUNT:case R.UNMOUNT:case R.EXEC:case R.FFPROBE:case R.WRITE_FILE:case R.READ_FILE:case R.DELETE_FILE:case R.RENAME:case R.CREATE_DIR:case R.LIST_DIR:case R.DELETE_DIR:C(this,A)[r](a);break;case R.LOG:C(this,W).forEach(n=>n(a));break;case R.PROGRESS:C(this,V).forEach(n=>n(a));break;case R.ERROR:C(this,F)[r](a);break}delete C(this,A)[r],delete C(this,F)[r]})});D(this,_,({type:r,data:s},a=[],n)=>C(this,M)?new Promise((l,o)=>{const d=zr();C(this,M)&&C(this,M).postMessage({id:d,type:r,data:s},a),C(this,A)[d]=l,C(this,F)[d]=o,n==null||n.addEventListener("abort",()=>{o(new DOMException(`Message # ${d} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(qr));U(this,"load",({classWorkerURL:r,...s}={},{signal:a}={})=>(C(this,M)||(H(this,M,r?new Worker(new URL(r,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),C(this,se).call(this)),C(this,_).call(this,{type:R.LOAD,data:s},void 0,a)));U(this,"exec",(r,s=-1,{signal:a}={})=>C(this,_).call(this,{type:R.EXEC,data:{args:r,timeout:s}},void 0,a));U(this,"ffprobe",(r,s=-1,{signal:a}={})=>C(this,_).call(this,{type:R.FFPROBE,data:{args:r,timeout:s}},void 0,a));U(this,"terminate",()=>{const r=Object.keys(C(this,F));for(const s of r)C(this,F)[s](Jr),delete C(this,F)[s],delete C(this,A)[s];C(this,M)&&(C(this,M).terminate(),H(this,M,null),this.loaded=!1)});U(this,"writeFile",(r,s,{signal:a}={})=>{const n=[];return s instanceof Uint8Array&&n.push(s.buffer),C(this,_).call(this,{type:R.WRITE_FILE,data:{path:r,data:s}},n,a)});U(this,"mount",(r,s,a)=>{const n=[];return C(this,_).call(this,{type:R.MOUNT,data:{fsType:r,options:s,mountPoint:a}},n)});U(this,"unmount",r=>{const s=[];return C(this,_).call(this,{type:R.UNMOUNT,data:{mountPoint:r}},s)});U(this,"readFile",(r,s="binary",{signal:a}={})=>C(this,_).call(this,{type:R.READ_FILE,data:{path:r,encoding:s}},void 0,a));U(this,"deleteFile",(r,{signal:s}={})=>C(this,_).call(this,{type:R.DELETE_FILE,data:{path:r}},void 0,s));U(this,"rename",(r,s,{signal:a}={})=>C(this,_).call(this,{type:R.RENAME,data:{oldPath:r,newPath:s}},void 0,a));U(this,"createDir",(r,{signal:s}={})=>C(this,_).call(this,{type:R.CREATE_DIR,data:{path:r}},void 0,s));U(this,"listDir",(r,{signal:s}={})=>C(this,_).call(this,{type:R.LIST_DIR,data:{path:r}},void 0,s));U(this,"deleteDir",(r,{signal:s}={})=>C(this,_).call(this,{type:R.DELETE_DIR,data:{path:r}},void 0,s))}on(r,s){r==="log"?C(this,W).push(s):r==="progress"&&C(this,V).push(s)}off(r,s){r==="log"?H(this,W,C(this,W).filter(a=>a!==s)):r==="progress"&&H(this,V,C(this,V).filter(a=>a!==s))}}M=new WeakMap,A=new WeakMap,F=new WeakMap,W=new WeakMap,V=new WeakMap,se=new WeakMap,_=new WeakMap;var Me;(function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"})(Me||(Me={}));const Gr=e=>new Promise((r,s)=>{const a=new FileReader;a.onload=()=>{const{result:n}=a;n instanceof ArrayBuffer?r(new Uint8Array(n)):r(new Uint8Array)},a.onerror=n=>{var l,o;s(Error(`File could not be read! Code=${((o=(l=n==null?void 0:n.target)==null?void 0:l.error)==null?void 0:o.code)||-1}`))},a.readAsArrayBuffer(e)}),Fe=async e=>{let r;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(s=>s.charCodeAt(0)):r=await(await fetch(e)).arrayBuffer();else if(e instanceof URL)r=await(await fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)r=await Gr(e);else return new Uint8Array;return new Uint8Array(r)};function Hr(){const[e]=i.useState(()=>new Kr),[r,s]=i.useState(!1),[a,n]=i.useState(!1),[l,o]=i.useState(""),d=i.useCallback(async()=>{if(!a)try{s(!0),await e.load(),n(!0),o("")}catch(h){throw console.error("Failed to initialize FFmpeg:",h),o("FFmpeg initialization failed. Please try again."),h}finally{s(!1)}},[e,a]),u=i.useCallback(async(h,c=15)=>{s(!0),o("");try{a||await d(),console.log("Starting video compression..."),await e.writeFile("input.mp4",await Fe(h)),console.log("Input file written"),await e.exec(["-i","input.mp4","-f","null","-"]);const b=["-i","input.mp4","-t",c.toString(),"-vf","scale=640:-2","-c:v","libx264","-preset","fast","-crf","23","-c:a","aac","-b:a","128k","-y","output.mp4"];console.log("Executing FFmpeg command:",b);const y=await e.exec(b);if(console.log("FFmpeg exit code:",y),y!==0)throw new Error(`FFmpeg process failed with exit code ${y}`);const E=await e.readFile("output.mp4"),v=new Blob([E],{type:"video/mp4"});console.log("Compression successful, output size:",v.size);try{await e.deleteFile("input.mp4"),await e.deleteFile("output.mp4")}catch(g){console.warn("Cleanup error:",g)}return s(!1),{success:!0,compressedVideo:v,duration:c,size:v.size}}catch(b){return console.error("Video compression error:",b),s(!1),o(b.message||"Failed to compress video"),{success:!1,error:b.message||"Failed to compress video"}}},[e,a,d]),m=i.useCallback(async(h,c)=>{const b=(c==null?void 0:c.maxDuration)||15,y=(c==null?void 0:c.width)||640,E=(c==null?void 0:c.height)||360;s(!0),o("");try{a||await d(),console.log("Creating scrolling video..."),await e.writeFile("input.mp4",await Fe(h));const v=["-i","input.mp4","-t",b.toString(),"-vf",`scale=${y}:${E}:force_original_aspect_ratio=decrease,pad=${y}:${E}:(ow-iw)/2:(oh-ih)/2`,"-c:v","libx264","-preset","fast","-crf","23","-c:a","aac","-b:a","128k","-y","output.mp4"];console.log("Executing scrolling video command:",v);const g=await e.exec(v);if(console.log("FFmpeg exit code:",g),g!==0)throw new Error(`FFmpeg process failed with exit code ${g}`);const f=await e.readFile("output.mp4"),w=new Blob([f],{type:"video/mp4"});console.log("Scrolling video created successfully");try{await e.deleteFile("input.mp4"),await e.deleteFile("output.mp4")}catch(j){console.warn("Cleanup error:",j)}return s(!1),{success:!0,compressedVideo:w,duration:b,size:w.size}}catch(v){return console.error("Scrolling video creation error:",v),s(!1),o(v.message||"Failed to create scrolling video"),{success:!1,error:v.message||"Failed to create scrolling video"}}},[e,a,d]);return{compressVideo:u,createScrollingVideo:m,isLoading:r,isReady:a,error:l,initializeFFmpeg:d}}function Yr({onVideoUpload:e,maxDuration:r=15,maxSize:s=50*1024*1024}){const[a,n]=i.useState(null),[l,o]=i.useState(""),[d,u]=i.useState(!1),[m,h]=i.useState(""),c=i.useRef(null),{createScrollingVideo:b,isLoading:y,error:E}=Hr(),v=async j=>{var L;const N=(L=j.target.files)==null?void 0:L[0];if(N){if(h(""),!N.type.startsWith("video/")){h("Please select a video file (MP4, MOV, AVI)");return}if(N.size>s){h(`File size must be less than ${s/1024/1024}MB`);return}n(N),o(URL.createObjectURL(N))}},g=async()=>{if(a){u(!0),h("");try{console.log("Starting video compression for file:",a.name);const j=await b(a,{maxDuration:r,width:640,height:360});if(console.log("Compression result:",j),j.success&&j.compressedVideo)console.log("Compression successful, uploading..."),e(j.compressedVideo),h("");else{const N=j.error||"Failed to compress video";h(N),console.error("Compression failed:",N)}}catch(j){const N=j.message||"An error occurred during compression";h(N),console.error("Compression error:",j)}finally{u(!1)}}},f=()=>{n(null),o(""),h(""),c.current&&(c.current.value="")},w=j=>{if(j===0)return"0 Bytes";const N=1024,L=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(j)/Math.log(N));return parseFloat((j/Math.pow(N,S)).toFixed(2))+" "+L[S]};return De.useEffect(()=>{E&&h(E)},[E]),t.jsxs("div",{className:"space-y-4",children:[!a&&t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-purple-500 transition-colors",children:[t.jsx("input",{ref:c,type:"file",accept:"video/*",onChange:v,className:"hidden",id:"video-upload"}),t.jsxs("label",{htmlFor:"video-upload",className:"cursor-pointer flex flex-col items-center space-y-3",children:[t.jsx(Ae,{className:"w-12 h-12 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Click to upload video"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["MP4, MOV, AVI up to ",s/1024/1024,"MB"]})]})]})]}),l&&t.jsxs("div",{className:"relative",children:[t.jsx("video",{src:l,controls:!0,className:"w-full rounded-lg border border-gray-200",style:{maxHeight:"300px"}}),t.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm text-gray-600",children:[t.jsx("span",{className:"truncate max-w-xs",children:a==null?void 0:a.name}),t.jsx("span",{children:w((a==null?void 0:a.size)||0)})]}),t.jsx("button",{onClick:f,className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",children:t.jsx(T,{className:"w-4 h-4"})})]}),m&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Be,{className:"w-4 h-4 text-red-600"}),t.jsx("p",{className:"text-red-800 text-sm",children:m})]})}),a&&t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:g,disabled:d||y,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:d||y?t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(vt,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{children:"Compressing..."})]}):t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(Te,{className:"w-4 h-4"}),t.jsxs("span",{children:["Compress & Upload (",r,"s)"]})]})}),t.jsx("button",{onClick:f,className:"px-4 py-2 border border-gray-300 text-gray-600 hover:text-gray-800 rounded-lg transition-colors",children:"Cancel"})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Video Requirements:"}),t.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[t.jsxs("li",{children:["• Maximum duration: ",r," seconds"]}),t.jsxs("li",{children:["• Maximum size: ",s/1024/1024,"MB"]}),t.jsx("li",{children:"• Supported formats: MP4, MOV, AVI"}),t.jsx("li",{children:"• Video will be compressed to optimal size"}),t.jsx("li",{children:"• Output: 640x360 resolution, 15 seconds max"})]})]})]})}function nt({isOpen:e,onClose:r,onSubmit:s,categories:a=[],initialData:n,isEditing:l=!1}){const[o,d]=i.useState({title:"",description:"",price:"",category_id:"",condition:"used",location:"",images:[],video:null}),[u,m]=i.useState([]),[h,c]=i.useState(""),[b,y]=i.useState(!1),[E,v]=i.useState(!1),[g,f]=i.useState("");i.useEffect(()=>{var p;n?(d({title:n.title||"",description:n.description||"",price:((p=n.price)==null?void 0:p.toString())||"",category_id:n.category_id||"",condition:n.condition||"used",location:n.location||"",images:n.images||[],video:null}),m(n.images||[]),c(n.video_url||"")):(d({title:"",description:"",price:"",category_id:"",condition:"used",location:"",images:[],video:null}),m([]),c("")),f("")},[n,e]);const w=async p=>{p.preventDefault(),y(!0),f("");try{const x={title:o.title,description:o.description,price:parseFloat(o.price),category_id:o.category_id,condition:o.condition,location:o.location,images:u,video:o.video};await s(x),r()}catch(x){console.error("Error submitting form:",x),f(x.message||"Failed to submit product")}finally{y(!1)}},j=()=>{const p=prompt("Enter image URL:");p&&p.trim()&&m(x=>[...x,p.trim()])},N=p=>{m(x=>x.filter((P,O)=>O!==p))},L=p=>{d(x=>({...x,video:p})),c(URL.createObjectURL(p)),v(!1),f("")},S=()=>{d(p=>({...p,video:null})),c(""),f("")};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l?"Edit Product":"List New Product"}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(T,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:w,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Title *"}),t.jsx("input",{type:"text",required:!0,value:o.title,onChange:p=>d(x=>({...x,title:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter product title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),t.jsx("textarea",{required:!0,value:o.description,onChange:p=>d(x=>({...x,description:p.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe your product in detail..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price ($) *"}),t.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:o.price,onChange:p=>d(x=>({...x,price:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),t.jsxs("select",{required:!0,value:o.category_id,onChange:p=>d(x=>({...x,category_id:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a category"}),a==null?void 0:a.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condition *"}),t.jsxs("select",{required:!0,value:o.condition,onChange:p=>d(x=>({...x,condition:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[t.jsx("option",{value:"new",children:"Brand New"}),t.jsx("option",{value:"like_new",children:"Like New"}),t.jsx("option",{value:"used",children:"Used"}),t.jsx("option",{value:"refurbished",children:"Refurbished"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),t.jsx("input",{type:"text",required:!0,value:o.location,onChange:p=>d(x=>({...x,location:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"City, State"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Video (15s max)"}),g&&t.jsx("div",{className:"mb-3 bg-red-50 border border-red-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Be,{className:"w-4 h-4 text-red-600"}),t.jsx("p",{className:"text-red-800 text-sm",children:g})]})}),E?t.jsx(Yr,{onVideoUpload:L,maxDuration:15}):h?t.jsxs("div",{className:"relative",children:[t.jsx("video",{src:h,controls:!0,className:"w-full rounded-lg border border-gray-200",style:{maxHeight:"200px"}}),t.jsx("button",{type:"button",onClick:S,className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",children:t.jsx(T,{className:"w-4 h-4"})})]}):t.jsxs("button",{type:"button",onClick:()=>v(!0),className:"flex items-center space-x-2 px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-purple-500 hover:text-purple-600 transition-colors",children:[t.jsx(Te,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Product Video"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Images"}),t.jsxs("div",{className:"space-y-3",children:[u.map((p,x)=>t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("img",{src:p,alt:`Product ${x+1}`,className:"w-12 h-12 object-cover rounded",onError:P=>{P.target.src="https://images.pexels.com/photos/3561339/pexels-photo-3561339.jpeg"}}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("p",{className:"text-sm text-gray-600 truncate",children:p})}),t.jsx("button",{type:"button",onClick:()=>N(x),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:t.jsx(T,{className:"w-4 h-4"})})]},x)),t.jsxs("button",{type:"button",onClick:j,className:"flex items-center space-x-2 px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-purple-500 hover:text-purple-600 transition-colors",children:[t.jsx(Ae,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Image URL"})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-lg disabled:opacity-50 transition-all",children:b?"Saving...":l?"Update Product":"List Product"})]})]})]})}):null}function ot(){const[e,r]=i.useState([]),[s,a]=i.useState([]),[n,l]=i.useState([]),[o,d]=i.useState([]),[u,m]=i.useState(!0),[h,c]=i.useState(""),b=async(S,p)=>{try{const x=`products/${p}/video-${Date.now()}.mp4`,{data:P,error:O}=await k.storage.from("product-videos").upload(x,S,{contentType:"video/mp4",cacheControl:"3600"});if(O)throw O;const{data:{publicUrl:G}}=k.storage.from("product-videos").getPublicUrl(x);return G}catch(x){throw console.error("Video upload error:",x),new Error("Failed to upload video")}},y=async S=>{try{m(!0);let p=k.from("products").select(`
          *,
          seller:profiles(email, full_name, avatar_url),
          category:categories(name, slug)
        `).eq("status","active");S!=null&&S.category&&(p=p.eq("category_id",S.category)),S!=null&&S.search&&(p=p.ilike("title",`%${S.search}%`));const{data:x,error:P}=await p.order("created_at",{ascending:!1});if(P)throw P;r(x||[])}catch(p){c(p.message)}finally{m(!1)}},E=async()=>{try{const{data:S,error:p}=await k.from("categories").select("*").order("name");if(p)throw p;a(S||[])}catch(S){c(S.message)}},v=async S=>{try{const{data:p,error:x}=await k.from("products").select(`
          *,
          category:categories(name, slug)
        `).eq("seller_id",S).order("created_at",{ascending:!1});if(x)throw x;l(p||[])}catch(p){c(p.message)}},g=async S=>{try{const{data:p,error:x}=await k.from("orders").select(`
          *,
          product:products(*, seller:profiles(email, full_name))
        `).eq("buyer_id",S).order("created_at",{ascending:!1});if(x)throw x;d(p||[])}catch(p){c(p.message)}},f=async S=>{var p,x,P;try{const{data:{user:O}}=await k.auth.getUser();if(!O)throw new Error("User not authenticated");const{data:G,error:ge}=await k.from("profiles").select("*").eq("id",O.id).single();if(ge&&ge.code==="PGRST116"){const{error:ee}=await k.from("profiles").insert([{id:O.id,email:O.email,full_name:((p=O.user_metadata)==null?void 0:p.full_name)||((x=O.email)==null?void 0:x.split("@")[0]),avatar_url:((P=O.user_metadata)==null?void 0:P.avatar_url)||""}]);if(ee)throw ee}const{data:ie,error:be}=await k.from("products").insert([{...S,seller_id:O.id,status:"active",video_url:null}]).select().single();if(be)throw be;let ce=null;if(S.video)try{ce=await b(S.video,ie.id),await k.from("products").update({video_url:ce}).eq("id",ie.id)}catch(ee){console.error("Video upload failed, continuing without video:",ee)}return await y(),{data:{...ie,video_url:ce},error:null}}catch(O){return console.error("Error creating product:",O),{data:null,error:O.message}}},w=async(S,p)=>{try{const{data:x,error:P}=await k.from("products").update(p).eq("id",S).select().single();if(P)throw P;return{data:x,error:null}}catch(x){return{data:null,error:x.message}}},j=async S=>{try{const{error:p}=await k.from("products").delete().eq("id",S);if(p)throw p;return{error:null}}catch(p){return{error:p.message}}},N=async S=>{try{const{data:{user:p}}=await k.auth.getUser();if(!p)throw new Error("User not authenticated");const{data:x,error:P}=await k.from("products").select("*").eq("id",S).single();if(P)throw P;const{data:O,error:G}=await k.from("orders").insert([{buyer_id:p.id,seller_id:x.seller_id,product_id:S,total_amount:x.price,status:"pending"}]).select().single();if(G)throw G;return await k.from("products").update({status:"sold"}).eq("id",S),{data:O,error:null}}catch(p){return{data:null,error:p.message}}},L=async(S,p)=>{try{const{data:x,error:P}=await k.from("orders").update({status:p,updated_at:new Date().toISOString()}).eq("id",S).select().single();if(P)throw P;return{data:x,error:null}}catch(x){return{data:null,error:x.message}}};return i.useEffect(()=>{y(),E()},[]),{products:e,categories:s,userProducts:n,userOrders:o,loading:u,error:h,fetchProducts:y,fetchCategories:E,fetchUserProducts:v,fetchUserOrders:g,createProduct:f,updateProduct:w,deleteProduct:j,createOrder:N,updateOrderStatus:L}}function Xr(){const[e,r]=i.useState(!1),[s,a]=i.useState(!1),[n,l]=i.useState(""),[o,d]=i.useState(""),[u,m]=i.useState(null),[h,c]=i.useState(!1),{user:b,loading:y}=le(),{products:E,categories:v,loading:g,createProduct:f,createOrder:w,fetchProducts:j}=ot(),N=tt(),L=async x=>{const{error:P}=await f(x);P?m({type:"error",message:`Failed to create product: ${P}`}):(m({type:"success",message:"Product listed successfully!"}),a(!1),await j())},S=async x=>{if(!b){r(!0);return}try{const{error:P}=await w(x);P?m({type:"error",message:`Error creating order: ${P}`}):(m({type:"success",message:"Order created successfully! The seller will contact you soon."}),await j())}catch{m({type:"error",message:"Error creating order"})}},p=E.filter(x=>{const P=!n||x.category_id===n,O=!o||x.title.toLowerCase().includes(o.toLowerCase())||x.description.toLowerCase().includes(o.toLowerCase());return P&&O});return y||g?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):t.jsxs("div",{className:"min-h-screen bg-gray-50 safe-area-inset-bottom",children:[u&&t.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${u.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,children:[t.jsx("p",{children:u.message}),t.jsx("button",{onClick:()=>m(null),className:"absolute top-1 right-1 text-sm",children:"✕"})]}),t.jsxs("header",{className:"bg-white shadow-sm border-b sticky top-0 z-40",children:[t.jsxs("div",{className:"px-4 py-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg",children:t.jsx(te,{className:"w-5 h-5 text-white"})}),t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Marketplace"})]}),t.jsx("button",{onClick:()=>c(!h),className:"p-2 rounded-lg hover:bg-gray-100",children:t.jsx(wt,{className:"w-5 h-5 text-gray-600"})})]}),t.jsx("div",{className:"mt-3",children:t.jsxs("div",{className:"relative",children:[t.jsx(jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search products...",value:o,onChange:x=>d(x.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]})})]}),h&&t.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border-b shadow-lg z-50",children:t.jsx("div",{className:"p-4 space-y-3",children:b?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{a(!0),c(!1)},className:"flex items-center space-x-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-all w-full justify-center",children:[t.jsx(we,{className:"w-4 h-4"}),t.jsx("span",{children:"Sell Item"})]}),t.jsxs("a",{href:"/account",className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 px-3 py-2 rounded-lg transition-colors w-full justify-center",onClick:()=>c(!1),children:[t.jsx(z,{className:"w-4 h-4"}),t.jsx("span",{children:"Account"})]})]}):t.jsx("button",{onClick:()=>{r(!0),c(!1)},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-all w-full",children:"Sign In"})})})]}),t.jsxs("main",{className:"px-4 py-6 md:max-w-7xl md:mx-auto md:px-6 md:py-8",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6 md:mb-8",children:[t.jsx(Nt,{className:"w-4 h-4 text-gray-600 md:w-5 md:h-5"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>l(""),className:`px-3 py-1.5 rounded-lg font-medium transition-colors text-sm md:px-4 md:py-2 md:text-base ${n?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-purple-100 text-purple-700"}`,children:"All"}),v.map(x=>t.jsx("button",{onClick:()=>l(x.id),className:`px-3 py-1.5 rounded-lg font-medium transition-colors text-sm md:px-4 md:py-2 md:text-base ${n===x.id?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x.name},x.id))]})]}),p.length===0?t.jsxs("div",{className:"text-center py-12 md:py-16",children:[t.jsx(te,{className:"w-12 h-12 text-gray-300 mx-auto mb-3 md:w-16 md:h-16 md:mb-4"}),t.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1 md:text-lg md:mb-2",children:"No products found"}),t.jsx("p",{className:"text-sm text-gray-500 md:text-base",children:o||n?"Try adjusting your search":"Be the first to list an item!"})]}):t.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 md:gap-6",children:p.map(x=>t.jsx(at,{product:x,onBuy:S,showActions:!0},x.id))})]}),N&&t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-40 safe-area-inset-bottom",children:t.jsx("div",{className:"flex justify-around items-center py-3 px-4",children:b?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>a(!0),className:"flex flex-col items-center p-2 rounded-lg text-purple-600 hover:bg-purple-50 transition-colors",children:[t.jsx(we,{className:"w-5 h-5 mb-1"}),t.jsx("span",{className:"text-xs font-medium",children:"Sell"})]}),t.jsxs("a",{href:"/account",className:"flex flex-col items-center p-2 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors",children:[t.jsx(z,{className:"w-5 h-5 mb-1"}),t.jsx("span",{className:"text-xs font-medium",children:"Account"})]})]}):t.jsxs("button",{onClick:()=>r(!0),className:"flex flex-col items-center p-2 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors",children:[t.jsx(z,{className:"w-5 h-5 mb-1"}),t.jsx("span",{className:"text-xs font-medium",children:"Sign In"})]})})}),t.jsx(st,{isOpen:e,onClose:()=>r(!1)}),t.jsx(nt,{isOpen:s,onClose:()=>a(!1),onSubmit:L,categories:v})]})}function Zr({isOpen:e,onClose:r}){var w,j;const{user:s,signOut:a}=le(),[n,l]=i.useState(((w=s==null?void 0:s.user_metadata)==null?void 0:w.full_name)||""),[o,d]=i.useState(((j=s==null?void 0:s.user_metadata)==null?void 0:j.bio)||""),[u,m]=i.useState(!1),[h,c]=i.useState(!1),[b,y]=i.useState(!1),E=async()=>{try{const{error:N}=await supabase.auth.updateUser({data:{full_name:n}});if(N)throw N;c(!1)}catch(N){console.error("Error updating name:",N)}},v=async()=>{try{const{error:N}=await supabase.auth.updateUser({data:{bio:o}});if(N)throw N;y(!1)}catch(N){console.error("Error updating bio:",N)}},g=async()=>{try{await a(),r()}catch(N){console.error("Error signing out:",N)}},f=()=>{m(!u),document.documentElement.classList.toggle("dark")};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-white bg-opacity-20 rounded-lg",children:t.jsx(z,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold",children:"Account Settings"}),t.jsx("p",{className:"text-purple-200 text-sm",children:s==null?void 0:s.email})]})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-10 rounded-lg transition-colors",children:t.jsx(T,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Display Name"}),t.jsx("div",{className:"flex items-center space-x-3",children:h?t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"text",value:n,onChange:N=>l(N.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"Enter your name"}),t.jsx("button",{onClick:E,className:"p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:t.jsx(je,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>c(!1),className:"p-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:t.jsx(T,{className:"w-4 h-4"})})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg text-gray-900 dark:text-white",children:n||"No name set"}),t.jsx("button",{onClick:()=>c(!0),className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:t.jsx(Ne,{className:"w-4 h-4"})})]})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Bio"}),t.jsx("div",{className:"space-y-3",children:b?t.jsxs(t.Fragment,{children:[t.jsx("textarea",{value:o,onChange:N=>d(N.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-800 dark:text-white resize-none",placeholder:"Tell us about yourself..."}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:v,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",children:[t.jsx(je,{className:"w-4 h-4"}),t.jsx("span",{children:"Save"})]}),t.jsxs("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors flex items-center space-x-2",children:[t.jsx(T,{className:"w-4 h-4"}),t.jsx("span",{children:"Cancel"})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg text-gray-900 dark:text-white min-h-[60px]",children:o||"No bio yet..."}),t.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[t.jsx(Ne,{className:"w-4 h-4"}),t.jsx("span",{children:"Edit Bio"})]})]})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[u?t.jsx(Et,{className:"w-5 h-5 text-purple-600"}):t.jsx(St,{className:"w-5 h-5 text-yellow-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dark Mode"})]}),t.jsx("button",{onClick:f,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u?"bg-purple-600":"bg-gray-300"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u?"translate-x-6":"translate-x-1"}`})})]}),t.jsxs("button",{onClick:g,className:"w-full py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(Ct,{className:"w-4 h-4"}),t.jsx("span",{children:"Sign Out"})]})]})]})}):null}function Qr(){const{user:e}=le(),{userProducts:r,userOrders:s,fetchUserProducts:a,deleteProduct:n,updateProduct:l}=ot(),[o,d]=i.useState(null),[u,m]=i.useState(!1),[h,c]=i.useState(!1),[b,y]=i.useState(null);i.useEffect(()=>{e&&a(e.id)},[e]);const E=async f=>{if(confirm("Are you sure you want to delete this product? This action cannot be undone."))try{const{error:w}=await n(f);w?y({type:"error",message:`Failed to delete product: ${w}`}):(y({type:"success",message:"Product deleted successfully!"}),await a(e.id))}catch{y({type:"error",message:"Error deleting product"})}},v=f=>{d(f),m(!0)},g=async f=>{if(o)try{const{error:w}=await l(o.id,f);w?y({type:"error",message:`Failed to update product: ${w}`}):(y({type:"success",message:"Product updated successfully!"}),m(!1),d(null),await a(e.id))}catch{y({type:"error",message:"Error updating product"})}};return e?t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b&&t.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${b.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,children:[t.jsx("p",{children:b.message}),t.jsx("button",{onClick:()=>y(null),className:"absolute top-1 right-1 text-sm",children:"✕"})]}),t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg",children:t.jsx(z,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Account"}),t.jsx("p",{className:"text-gray-600",children:e.email})]})]}),t.jsxs("button",{onClick:()=>c(!0),className:"p-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors flex items-center space-x-2",children:[t.jsx(Rt,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("section",{className:"mb-12",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[t.jsx(Ee,{className:"w-5 h-5 mr-2"}),"My Products (",r.length,")"]})}),r.length===0?t.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300",children:[t.jsx(Ee,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products yet"}),t.jsx("p",{className:"text-gray-500",children:"Start selling by listing your first item!"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(f=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsx(at,{product:f,showActions:!1}),t.jsx("div",{className:"p-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f.status==="active"?"bg-green-100 text-green-700":f.status==="sold"?"bg-gray-100 text-gray-700":"bg-yellow-100 text-yellow-700"}`,children:f.status.charAt(0).toUpperCase()+f.status.slice(1)}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>v(f),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit product",children:t.jsx(Pt,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>E(f.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete product",children:t.jsx(kt,{className:"w-4 h-4"})})]})]})})]},f.id))})]}),t.jsxs("section",{children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center mb-6",children:[t.jsx(te,{className:"w-5 h-5 mr-2"}),"My Orders (",s.length,")"]}),s.length===0?t.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300",children:[t.jsx(te,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders yet"}),t.jsx("p",{className:"text-gray-500",children:"Your orders will appear here"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(f=>{var w,j,N,L,S,p;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("img",{src:((j=(w=f.product)==null?void 0:w.images)==null?void 0:j[0])||"https://images.pexels.com/photos/3561339/pexels-photo-3561339.jpeg",alt:(N=f.product)==null?void 0:N.title,className:"w-10 h-10 object-cover rounded"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:(L=f.product)==null?void 0:L.title}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Seller: ",(p=(S=f.product)==null?void 0:S.seller)==null?void 0:p.full_name]})]})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",f.total_amount]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f.status==="delivered"?"bg-green-100 text-green-700":f.status==="shipped"?"bg-blue-100 text-blue-700":f.status==="confirmed"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(f.created_at).toLocaleDateString()})]},f.id)})})]})})]})]}),t.jsx(nt,{isOpen:u,onClose:()=>{m(!1),d(null)},onSubmit:g,initialData:o,isEditing:!0}),t.jsx(Zr,{isOpen:h,onClose:()=>c(!1)})]}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Please sign in"}),t.jsx("p",{className:"text-gray-500",children:"You need to be signed in to view your account"})]})})}function es(){return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx("div",{className:"max-w-md w-full",children:t.jsx(st,{isOpen:!0,onClose:()=>window.history.back()})})})}const ts=()=>{typeof window<"u"&&window.innerWidth<768&&document.documentElement.style.setProperty("--scroll-padding","env(safe-area-inset-top)")},rs=()=>{if(typeof window<"u"){let e=0;const r=s=>{const a=Date.now();a-e<=300&&s.preventDefault(),e=a};return document.addEventListener("touchend",r,{passive:!1}),()=>{document.removeEventListener("touchend",r)}}},ss=()=>{if(typeof window<"u"&&"IntersectionObserver"in window){const e=document.querySelectorAll("img[data-src]"),r=new IntersectionObserver(s=>{s.forEach(a=>{if(a.isIntersecting){const n=a.target;n.src=n.dataset.src||"",n.removeAttribute("data-src"),r.unobserve(n)}})});e.forEach(s=>r.observe(s))}};function as(){const e=rt();return i.useEffect(()=>{ts(),ss();const r=rs();return()=>{r==null||r()}},[]),i.useEffect(()=>{e.isMobile?(document.body.classList.add("is-mobile"),document.body.classList.remove("is-tablet","is-desktop")):e.isTablet?(document.body.classList.add("is-tablet"),document.body.classList.remove("is-mobile","is-desktop")):(document.body.classList.add("is-desktop"),document.body.classList.remove("is-mobile","is-tablet")),document.body.classList.toggle("is-portrait",e.orientation==="portrait"),document.body.classList.toggle("is-landscape",e.orientation==="landscape")},[e.isMobile,e.isTablet,e.isDesktop,e.orientation]),i.useEffect(()=>{const r=document.querySelector('meta[name="viewport"]');if(r){let s="width=device-width, initial-scale=1";e.isMobile&&(s+=", maximum-scale=1.0, user-scalable=no"),r.setAttribute("content",s)}},[e.isMobile]),null}const ns=()=>{i.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{console.log("SW ready:",e)})},[])};function os(){return ns(),t.jsx(Mr,{children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(as,{}),t.jsx(Tr,{}),t.jsx("main",{className:"safe-area-top safe-area-bottom",children:t.jsxs(Pr,{children:[t.jsx(Y,{path:"/",element:t.jsx($r,{})}),t.jsx(Y,{path:"/marketplace",element:t.jsx(Xr,{})}),t.jsx(Y,{path:"/account",element:t.jsx(Qr,{})}),t.jsx(Y,{path:"/auth",element:t.jsx(es,{})})]})})]})})}ue.createRoot(document.getElementById("root")).render(t.jsx(De.StrictMode,{children:t.jsx(os,{})}));
